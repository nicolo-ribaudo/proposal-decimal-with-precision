<!doctype html>
<meta charset="utf8">
<link rel="stylesheet" href="./spec.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="./spec.js"></script>
<pre class="metadata">
title: Numeric value with fractional digits
stage: -1
contributors: Jesse Alama, Nicolò Ribaudo
</pre>

<emu-clause id="sec-numbers-and-dates" number="21">
  <h1>Numbers and Dates</h1>

  <emu-clause id="sec-withfractionaldigits">
    <h1>Numerics with Fractional Digits</h1>
    <p>A WithFractionalDigits is an object that specifies how another object, such as a Number, can be enriched with additional information about its precision and how that additional precision can be presented. WithFractionalDigits objects are not instantiable; they are created, instead, by calling a suitable method in any object that has the `withFractionalDigits` method in its prototype.</p>
    <emu-clause id="sec-withfractionaldigits-prototype">
      <h1>The %WithFractionalDigitsPrototype% Object</h1>
      <p>The <dfn>%WithFractionalDigitsPrototype%</dfn> object:</p>
      <ul>
        <li>has properties that are inherited by all WithFractionalDigits Objects.</li>
        <li>is an ordinary object.</li>
        <li>has a [[Prototype]] internal slot whose value is Object.prototype.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-%withfractionaldigitprototype%.numericObject">
        <h1>get %WithFractionalDigitsPrototype%.numericObject</h1>
        <emu-alg>
          1. Let _O_ be the *this* value.
          1. Perform ? RequireInternalSlot(_O_, [[FractionalDigits]]).
          1. Let _N_ be _O_.[[NumericValue]].
          1. Return ! ToObject(_N_).
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-%withfractionaldigitprototype%.fractionalDigits">
        <h1>get %WithFractionalDigitsPrototype%.fractionalDigits</h1>
        <emu-alg>
          1. Let _O_ be the *this* value.
          1. Perform ? RequireInternalSlot(_O_, [[FractionalDigits]]).
          1. Return _O_.[[FractionalDigits]].
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-%withfractionaldigitprototype%.valueof">
        <h1>%WithFractionalDigitsPrototype%.valueOf ( )</h1>
        <emu-alg>
          1. Let _O_ be the *this* value.
          1. Perform ? RequireInternalSlot(_O_, [[FractionalDigits]]).
          1. Let _N_ be _O_.[[NumericValue]].
          1. Return ? ToPrimitive(_N_).
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-%withfractionaldigitprototype%.tostring">
        <h1>%WithFractionalDigitsPrototype%.toString ( )</h1>
        <p>This function performs the following steps when called:</p>
        <emu-alg>
          1. Let _O_ be the *this* value.
          1. Perform ? RequireInternalSlot(_O_, [[FractionalDigits]]).
          1. Let _N_ be _O_.[[NumericValue]].
          1. Let _digits_ be _O_.[[FractionalDigits]].
          1. If _N_ has a [[Decimal128Data]] internal slot, then
            1. Return ? Call(%Decimal.prototype.toFixed%, _N_, « _digits_ »).
          1. Return ? Call(%Number.prototype.toFixed%, _N_, « _digits_ »).
        </emu-alg>
      </emu-clause>

      <emu-clause id="sec-%withfractionaldigitprototype%.tolocalestring">
        <h1>%WithFractionalDigitsPrototype%.toLocaleString ( [ _locales_ [ , _options_ ] ] )</h1>

        <emu-note type="editor">
          <p>This will be defined in ECMA-402</p>
        </emu-note>

        <p>This function performs the following steps when called:</p>
        <emu-alg>
          1. Let _O_ be the *this* value.
          1. Perform ? RequireInternalSlot(_O_, [[FractionalDigits]]).
          1. Let _numberFormat_ be ? Construct(%Intl.NumberFormat%, « _locales_ , _options_ »).
          1. Return FormatNumeric(_numberFormat_, _O_).
        </emu-alg>
      </emu-clause>
    </emu-clause>
  </emu-clause>
</emu-clause>
